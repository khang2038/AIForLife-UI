import{d as E,r as o,j as e,a0 as S,a6 as O,a4 as A,a7 as k,a5 as f,ag as B,a2 as s,T as b,$ as C}from"./index-CnrKXPxV.js";import{_ as I,r as D,T as L,a as R,b as $,c as P,d as c,e as q,A as j,C as N,h as z}from"./Dot-fqoDOA_b.js";function M(t,n=!1,d){E();const[i,a]=o.useState([]),[u,h]=o.useState([]);o.useEffect(()=>{t!=null&&t.data&&(a(Object.values(t.data)),h(Object.keys(t.data)))},[t]);const r={labels:u,plotOptions:{pie:{size:180}},dataLabels:{enabled:!0},legend:{position:"bottom"}};return console.log(n),e.jsx(S,{id:"chart",sx:{py:4,bgcolor:"transparent",...d},children:e.jsx(I,{type:n?"pie":"donut",series:i,options:r})})}var v={},F=O;Object.defineProperty(v,"__esModule",{value:!0});var _=v.default=void 0,H=F(D()),G=e;_=v.default=(0,H.default)((0,G.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const V=[{id:"duration",align:"left",disablePadding:!1,label:"Thời lượng"},{id:"text",align:"left",disablePadding:!0,label:"Đoạn Văn"},{id:"file",align:"right",disablePadding:!1,label:"File Âm Thanh"},{id:"emotionByAudio",align:"left",disablePadding:!1,label:"Cảm xúc theo âm thanh"},{id:"emotionByText",align:"right",disablePadding:!1,label:"Cảm xúc theo nội dung"},{id:"action",align:"right",disablePadding:!1,label:"Thao tác"}];function w(){return e.jsx(q,{children:e.jsx(P,{children:V.map(t=>e.jsx(c,{align:t.align,padding:t.disablePadding?"none":"normal",children:t.label},t.id))})})}function W({details:t}){var n,d;return e.jsx(S,{children:e.jsx(L,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:e.jsxs(R,{"aria-labelledby":"tableTitle",children:[e.jsx(w,{}),e.jsx($,{children:(d=(n=t==null?void 0:t.reviewSpeechDetailObject)==null?void 0:n.predictions_details)==null?void 0:d.map((i,a)=>{var h,r,p,x,g,m;const u=`enhanced-table-checkbox-${a}`;return e.jsxs(P,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},tabIndex:-1,children:[e.jsx(c,{component:"th",id:u,scope:"row",children:e.jsxs(A,{color:"secondary",children:[" ",i==null?void 0:i.duration]})}),e.jsx(c,{align:"right",children:(p=(r=(h=t==null?void 0:t.segmentAnalysisObject)==null?void 0:h.detail)==null?void 0:r[a])==null?void 0:p.text}),e.jsx(c,{children:i.file}),e.jsx(c,{align:"right",children:i.emotion}),e.jsx(c,{align:"right",children:(m=(g=(x=t==null?void 0:t.segmentAnalysisObject)==null?void 0:x.detail)==null?void 0:g[a])==null?void 0:m.sentiment}),e.jsx(c,{align:"right",children:e.jsx(k,{color:"success","aria-label":`Call ${i.fullName}`,onClick:()=>console.log(`Calling ${i.phoneNumber}`),children:e.jsx(_,{})})})]},a+a)})})]})})})}w.propTypes={order:f.any,orderBy:f.string};f.number;function K(){var r;const{id:t}=B(),[n,d]=o.useState({emotions:[1,2]}),[i,a]=o.useState(0),[u,h]=o.useState(0);return o.useEffect(()=>{(async()=>{var x,g,m;try{const l=(await z(t)).data;d(l);const T=(x=l==null?void 0:l.segmentAnalysisObject)==null?void 0:x.conclusion;a(T["Tích cực"]+T["Bình thường"]),h((m=(g=l==null?void 0:l.reviewPercentageSpeechObject)==null?void 0:g.overview_percentage)==null?void 0:m.positive_percentage)}catch(y){console.error("Error fetching details:",y)}})()},[t]),e.jsxs(s,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[e.jsx(s,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsx(b,{variant:"h5",children:"Tổng quan Cuộc gọi"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(j,{title:"Nhân viên",count:n==null?void 0:n.fullNameEmployee,extra:"35,000"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(j,{title:"Thời gian cuộc gọi",count:n==null?void 0:n.durationFile,percentage:70.5,extra:"8,900"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(j,{title:"Điểm số giọng nói",count:u+"/100",percentage:27.4,isLoss:!0,color:"warning",extra:"1,943"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(j,{title:"Điểm số nội dung",count:i+"/100",percentage:27.4,isLoss:!0,color:"warning",extra:"$20,395"})}),e.jsx(s,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),e.jsx(s,{item:!0,xs:12,md:7,lg:8,children:e.jsx(N,{data:n})}),e.jsxs(s,{item:!0,xs:12,md:5,lg:4,children:[e.jsxs(s,{container:!0,alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(b,{variant:"h5",children:"Thành phần cảm xúc"})}),e.jsx(s,{item:!0})]}),e.jsx(C,{sx:{mt:2},content:!1,children:e.jsx(M,{data:(r=n==null?void 0:n.reviewSpeechObject)==null?void 0:r.emotion_percentages})})]}),e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(s,{container:!0,alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(b,{variant:"h5",children:"Phân tích cuộc gọi"})}),e.jsx(s,{item:!0})]}),e.jsx(C,{sx:{mt:2},content:!1,children:e.jsx(W,{details:n})})]})]})}export{K as default};
